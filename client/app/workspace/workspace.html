<div layout="row" class="workspace-header">
	<div layout="row" class="project-selector" layout-align="left center">
		<div class="selected-project">{{workspaceCtrl.selectedProject.name}}</div>
		<md-menu md-offset="0 48">
			<md-button aria-label="Open demo menu" class="md-icon-button" ng-click="$mdOpenMenu($event)">
				<md-icon>more_vert</md-icon>
			</md-button>

			<md-menu-content width="4">
				<md-menu-item ng-repeat="project in workspaceCtrl.projects">
					<md-button ng-click="workspaceCtrl.setSelectedProject(project)">
						<p>{{project.name}}</p>
					</md-button>
				</md-menu-item>
			</md-menu-content>
		</md-menu>
	</div>

</div>

<div class="container">
	<table class="table borderless">
		<tbody ng-repeat="testSuite in workspaceCtrl.selectedProject.testSuites" ng-include="'tree_item.html'">

		</tbody>
	</table>
</div>

<script type="text/ng-template" id="tree_item.html">
    <tr>
        <td>
            {{ testSuite.title }}
        </td>
        <td class="absorbing-column">
            <div class="progress">
                <div class="progress-bar progress-bar-success" role="progressbar" title="{{workspaceCtrl.getSuccessPercent(testSuite)}}" ng-style="{'width': workspaceCtrl.getSuccessPercent(testSuite)}">
                    Succeeded
                </div>
                <div class="progress-bar progress-bar-danger" role="progressbar" title="{{workspaceCtrl.getFailurePercent(testSuite)}}" ng-style="{'width': workspaceCtrl.getFailurePercent(testSuite)}">
                    Failed
                </div>
            </div>
        </td>
        <td>
            <button open-window="/play-testsuite/{{workspaceCtrl.selectedProject._id}}/{{testSuite.id}}" class="btn btn-success">
                Start
                </button>
        </td>
    </tr>
    <tr ng-repeat="testSuite in testSuite.nodes">
        <td colspan="3">
            <table class="table borderless" ng-include="'tree_item.html'">

            </table>
        </td>
    </tr>
</script>